apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: bell-rest-deploy
spec:
  params:
    - name: contextDir
      description: the context directory from where to build the application
      default: 
    - name: destinationImage
      description: the fully qualified image name
      default: "$(outputs.resources.builtImage.url)"
    - name: dockerFile
      description: the docker file to used for building the application
      default: ./bell-rest/src/main/docker/Dockerfile.jvm
  resources:
    - name: appSource
      type: git
    - name: appImage
      type: image
  tasks:
    - name: build-bell-app
      taskRef:
        name: build-bell
      params:
        - name: contextDir
          value: $(params.contextDir)
      resources:
        inputs:
          - name: source
            resource: appSource
        outputs:
          - name: image
            resource: appImage
    